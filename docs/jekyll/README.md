# {{ site.title }}

[![License](https://img.shields.io/github/license/{{ site.github_username }}{{ site.baseurl }})](LICENSE.md)

**Author:** {{ site.author }}  
**Version:** {{ site.version }}  

## Overview

{{ site.description }}  

**Ansible Galaxy cookiecutter** template project /w Ansible Auto Documentation + **[Github docs](https://github.com/jcook3701/github-docs-cookiecutter)** template generation + **[Sphinx docs](https://github.com/jcook3701/sphinx-cookiecutter)** template generation.  

**Utilizes:**  
The **{{ site.title }}** depends on the following repositories for its documentation and sub-features.  

* [cookiecutter-cookiecutter](https://github.com/jcook3701/cookiecutter-cookiecutter) Generates cookiecutter template projects and is able to be queried by generated projects for autogenerated file updates.
* [Github docs](https://github.com/jcook3701/github-docs-cookiecutter) cookiecutter template generation.
* [Nutri-Matic](https://github.com/jcook3701/nutri-matic) cookiecutter utilities for streamlining development and utilization of Cookiecutter templates.

**Maintains:**  
The **{{ site.title }}** is used to maintain the build and ci/cd structure for the following projects.  

* **[jcook3701.docker](https://github.com/jcook3701/jcook3701.docker)** Ansible Galaxy collection used to install docker packages.
* **[jcook3701.flatpak](https://github.com/jcook3701/jcook3701.flatpak)** Ansible Galaxy collection used to install flatpak packages.
* **[jcook3701.pkgs](https://github.com/jcook3701/jcook3701.pkgs)** Ansible Galaxy collection used to install system (Debian, Ubuntu, RHEL) packages.
* **[jcook3701.source](https://github.com/jcook3701/jcook3701.source)** Ansible Galaxy collection used to install packages from source code.
* **[jcook3701.snap](https://github.com/jcook3701/jcook3701.snap)** Ansible Galaxy collection used to install snap packages.

***

**CI/CD Check List:**

* ![dependency-check](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/dependency-check.yml/badge.svg)
* ![format-check](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/format-check.yml/badge.svg)
* ![lint-check](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/lint-check.yml/badge.svg)
* ![security-audit](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/security-audit.yml/badge.svg)
* ![spellcheck](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/spellcheck.yml/badge.svg)
* ![tests](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/tests.yml/badge.svg)
* ![typecheck](https://github.com/jcook3701/ansible-galaxy-cookiecutter/actions/workflows/typecheck.yml/badge.svg)

***

**Note:** Unless you are using a newer version of cookiecutter >= 2, ```--no-input``` is necessary for template generation without error.  

## Usage Examples

**Example:** Pull from main branch.  
**Note:** [Nutri-Matic](https://github.com/jcook3701/nutri-matic) is needed in active python environment.  

```shell
$ cookiecutter git@github.com:jcook3701/ansible-galaxy-cookiecutter.git \
    --no-input \
    namespace="jcook3701" \
    project_name="test-project" \
    description="Ansible test project."
```

**Example:** Pull from develop branch.  

```shell
$ cookiecutter git@github.com:jcook3701/ansible-galaxy-cookiecutter.git \
    --checkout develop \
     --no-input \
    namespace="jcook3701" \
    project_name="test-project" \
    description="Ansible test project."
```

**Note:** replace ```test-project``` or any of the other variables with real context configuration variables.  

***

## Development Strategy

**Note:** All Makefile commands are used in ci/cd to ensure that if they pass locally they should also pass once pushed to github.  

### üêçÔ∏è Build environment (.venv)

``` shell
$ make install
```

### üß¨ Dependency Management (deptry)

```shell
$ make dependency-check
```

### üõ°Ô∏è Security Audit (pip-audit)

```shell
$ make security
```

### üé® Formatting (black)

```shell
$ make format-check
```

```shell
$ make format-fix
```

### üîç Linting (jinja2-cli, ruff, tomllint, & yaml-lint)

``` shell
$ make lint-check
```

``` shell
$ make lint-fix
```

### üéì Spellchecking (codespell)

```shell
$ make spellcheck
```

### üß† Typechecking (mypy)

``` shell
$ make typecheck
```

### üß™ Testing (pytest)

``` shell
$ make test
```

### üöÄ Release (git tag)

```shell
$ make release
```

### ‚ùì Build Help

``` shell
$ make help
```

## Commit Help

**Note:** Commits are required to be conventional git commit message.  This helps with the auto-generation of the changelog files and is enforced by pre-commit.  
**example:**  

```shell
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

* ```<type>```: A required noun that describes the nature of the change.  
* ```[optional scope]```: An optional phrase within parentheses that specifies the part of the codebase being affected (e.g., fix(parser):).  
* ```<description>```: A required short, imperative-mood summary of the changes.  
* ```[optional body]```: A longer description providing additional context and "what and why" details.  
* ```[optional footer(s)]```: Used for adding meta-information, such as issue references (Fixes #123) or indicating breaking changes.  

***

## Requirements

**Python 3.11**  

```shell
$ sudo apt install python3.11
```

**[Nutri-Matic](https://github.com/jcook3701/nutri-matic)**  
**Note:** This is needed for the cookiecutter hooks to run correctly.  Without this package installed in active python environment cookiecutter pull will fail.  

```shell
$ pip install nutri-matic
```

**[rustup](https://rust-lang.org/tools/install/)**  
**Note:** I found that it is easiest to use rustup to manage rustc and cargo but this is not required.  
**Example:** Install rustup with the following:  

```shell
$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

**[git-cliff](https://git-cliff.org/)**  
**Note:** git-cliff can generate changelog files from the Git history by utilizing conventional commits as well as regex-powered custom parsers.  

```shell
$ cargo install git-cliff
```

***

## Authors Notes

1. This code currently works with cookiecutter (V2.6) from Ubuntu's apt repositories.

<!--
### Helpful Emojis:

üì°üêãüõ¢Ô∏èüö¢ ü¶äüíº üë®üèº‚Äçüíªüöß üìå üå±üå≥ ‚è≥üîë üî´‚åö üßºüßΩ üîåüíâ
--->
